<!DOCTYPE html>
<script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
<script src="http://code.jquery.com/jquery-1.11.1.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.5/socket.io.min.js">
</script>

<form action="">
  <input id="n" type="hidden" value=""> 
  <input id="m" autocomplete="off" required>
  <input type="submit" value="Send">
</form>

<ul id="messages"></ul>

<script type="text/javascript" charset="utf-8">
  var socket = io();
  socket.on('connect', function() {
      socket.emit('my event', {data: 'I\'m connected!'});
      $('#messages').append($('<li>').text("I connected"));
  });
  
  socket.on('lobby message', function(msg){
      $('#messages').append($('<li>').text(msg));
  });

  $(document).ready(function () {
      $('#n').val($.cookie('uname'));
  });
  
  $('form').submit(function(){
      socket.emit('lobby message', $('#m').val());
      console.log($('#m').val());
      $('#m').val('');
      return false;
  });
</script>
